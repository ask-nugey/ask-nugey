# é–‹ç™ºã‚¬ã‚¤ãƒ‰

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€moon TypeScriptãƒ¢ãƒãƒ¬ãƒã§ã®æ—¥å¸¸çš„ãªé–‹ç™ºãƒ•ãƒ­ãƒ¼ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚

> ğŸ’¡ **ã™ãã«å§‹ã‚ã‚‹**: åŸºæœ¬çš„ãªã‚³ãƒãƒ³ãƒ‰ã¯[ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](./quick-reference.md)ã‚’ã”è¦§ãã ã•ã„ã€‚  
> ğŸ”§ **è¨­å®šã«ã¤ã„ã¦**: è©³ç´°ãªè¨­å®šã¯[è¨­å®šã‚¬ã‚¤ãƒ‰](./configuration.md)ã‚’ã”è¦§ãã ã•ã„ã€‚

## ğŸŒ… é–‹ç™ºç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# 1. ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³
git clone <repository-url>
cd moon-ts

# 2. ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pnpm install
```

## ğŸš€ æ—¥å¸¸çš„ãªé–‹ç™ºãƒ•ãƒ­ãƒ¼

### 1. é–‹ç™ºä¸­ã®ä½œæ¥­

#### ãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›†å¾Œ
åŸºæœ¬çš„ãªã‚³ãƒãƒ³ãƒ‰ã¯[ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](./quick-reference.md)ã‚’ã”è¦§ãã ã•ã„ã€‚

#### æ–°ã—ã„æ©Ÿèƒ½ã®å®Ÿè£…

```bash
# 1. æ©Ÿèƒ½ãƒ–ãƒ©ãƒ³ãƒã®ä½œæˆ
git checkout -b feature/new-feature

# 2. ã‚³ãƒ¼ãƒ‰å®Ÿè£…
# ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†...

# 3. å“è³ªãƒã‚§ãƒƒã‚¯ï¼ˆè©³ç´°ã¯ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹å‚ç…§ï¼‰
moon run :fix && moon run :typecheck && moon run :build
```

### 2. ã‚³ãƒŸãƒƒãƒˆå‰ã®ãƒã‚§ãƒƒã‚¯

æ¨å¥¨ã•ã‚Œã‚‹å“è³ªãƒã‚§ãƒƒã‚¯ãƒ•ãƒ­ãƒ¼ï¼š

```bash
# ä¸€æ‹¬ãƒã‚§ãƒƒã‚¯ï¼ˆè©³ç´°ãªã‚³ãƒãƒ³ãƒ‰ã¯ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹å‚ç…§ï¼‰
moon run :fix && moon run :check && moon run :typecheck && moon run :build

# ã‚³ãƒŸãƒƒãƒˆ
git add .
git commit -m "feat: æ–°æ©Ÿèƒ½ã®å®Ÿè£…"
```

## ğŸ“¦ ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†

ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ã®è©³ç´°ãªã‚³ãƒãƒ³ãƒ‰ã¯[ã‚³ãƒãƒ³ãƒ‰ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](./commands.md#%F0%9F%9B%A0%EF%B8%8F-%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E7%AE%A1%E7%90%86)ã‚’ã”è¦§ãã ã•ã„ã€‚

åŸºæœ¬çš„ãªæ“ä½œï¼š
- æ–°ã—ã„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®è¿½åŠ 
- ä¾å­˜é–¢ä¿‚ã®æ›´æ–°
- ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†

## ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ–¹æ³•

#### 1. å‹ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹

```bash
# åŸå› : sharedãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒå¤ã„
# è§£æ±º: sharedã‚’å…ˆã«ãƒ“ãƒ«ãƒ‰
moon run shared:build
moon run :typecheck
```

#### 2. ã‚­ãƒ£ãƒƒã‚·ãƒ¥é–¢é€£ã®å•é¡Œ

```bash
# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢ã—ã¦å†å®Ÿè¡Œ
moon clean
moon run :build
```

#### 3. ä¾å­˜é–¢ä¿‚ã®å•é¡Œ

```bash
# node_modulesã¨lockãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤ã—ã¦å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
rm -rf node_modules
rm pnpm-lock.yaml
pnpm install
```

#### 4. Biomeè¨­å®šã®å•é¡Œ

```bash
# Biomeè¨­å®šã‚’ç¢ºèª
moon run :check --log debug

# ç‰¹å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿ãƒã‚§ãƒƒã‚¯
cd apps/web
npx biome check src/index.ts
```

### ãƒ‡ãƒãƒƒã‚°ã‚³ãƒãƒ³ãƒ‰

è©³ç´°ãªãƒ‡ãƒãƒƒã‚°ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯[ã‚³ãƒãƒ³ãƒ‰ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](./commands.md#%F0%9F%9A%80-ci-cd%E5%90%91%E3%81%91%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89)ã‚’ã”è¦§ãã ã•ã„ã€‚

åŸºæœ¬çš„ãªãƒ‡ãƒãƒƒã‚°æ‰‹é †ï¼š
1. `--log debug`ã§è©³ç´°ãƒ­ã‚°ç¢ºèª
2. `--force`ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ç„¡è¦–ã—ã¦å®Ÿè¡Œ
3. `moon task`ã§ã‚¿ã‚¹ã‚¯ã®è©³ç´°æƒ…å ±ç¢ºèª

## ğŸ“ ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„

### TypeScript

```typescript
// âœ… è‰¯ã„ä¾‹
export interface UserData {
	id: string;
	name: string;
	email: string;
}

export const createUser = (data: UserData): User => {
	return new User(data);
};

// âŒ é¿ã‘ã‚‹ä¾‹
export const createUser = (data: any) => {
	return new User(data);
};
```

### ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
src/
â”œâ”€â”€ index.ts              # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆãƒ»ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
â”œâ”€â”€ types/                # å‹å®šç¾©
â”‚   â””â”€â”€ user.ts
â”œâ”€â”€ utils/                # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
â”‚   â””â”€â”€ validation.ts
â””â”€â”€ services/             # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
    â””â”€â”€ userService.ts
```

### ã‚¤ãƒ³ãƒãƒ¼ãƒˆè¦ç´„

```typescript
// 1. å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
import axios from 'axios';
import { z } from 'zod';

// 2. å†…éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
import { Logger } from '@packages/shared';

// 3. ç›¸å¯¾ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
import { validateUser } from './utils/validation';
import type { UserData } from './types/user';
```

## ğŸ§ª ãƒ†ã‚¹ãƒˆï¼ˆå°†æ¥å®Ÿè£…äºˆå®šï¼‰

ç¾åœ¨ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«ã¯ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¯å«ã¾ã‚Œã¦ã„ã¾ã›ã‚“ãŒã€å°†æ¥çš„ã«vitestã‚’è¿½åŠ äºˆå®šã§ã™ã€‚

### æ¨å¥¨ãƒ†ã‚¹ãƒˆæ§‹æˆ

```bash
# å°†æ¥çš„ã«åˆ©ç”¨å¯èƒ½ã«ãªã‚‹äºˆå®š
moon run :test              # å…¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ†ã‚¹ãƒˆ
moon run web:test           # webãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ†ã‚¹ãƒˆ
moon run shared:test        # sharedãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ†ã‚¹ãƒˆ
```

## ğŸš€ æœ¬ç•ªç’°å¢ƒã¸ã®å±•é–‹

### ãƒ“ãƒ«ãƒ‰ç¢ºèª

```bash
# ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ãƒ“ãƒ«ãƒ‰
moon run :build

# ãƒ“ãƒ«ãƒ‰æˆæœç‰©ã®ç¢ºèª
ls -la apps/web/dist
ls -la packages/shared/dist
```

### CI/CDå‘ã‘ã‚³ãƒãƒ³ãƒ‰

```bash
# CIç’°å¢ƒã§ã®å®Ÿè¡Œ
moon ci

# å½±éŸ¿ã‚’å—ã‘ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã¿ãƒ“ãƒ«ãƒ‰
moon run :build --affected
```

## ğŸ’¡ é–‹ç™ºã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### 1. ã‚³ãƒŸãƒƒãƒˆå‰ãƒã‚§ãƒƒã‚¯ã®è‡ªå‹•åŒ–

`.git/hooks/pre-commit`ã‚’ä½œæˆï¼š

```bash
#!/bin/sh
moon run :fix
moon run :typecheck
moon run :build
```

### 2. VSCodeè¨­å®š

`.vscode/settings.json`ã«æ¨å¥¨è¨­å®šï¼š

```json
{
	"typescript.preferences.includePackageJsonAutoImports": "on",
	"typescript.preferences.organizeImports": true,
	"editor.formatOnSave": true,
	"editor.defaultFormatter": "biomejs.biome"
}
```

### 3. åŠ¹ç‡çš„ãªé–‹ç™º

- `moon run :fix`ã‚’é »ç¹ã«ä½¿ç”¨ã—ã¦ã‚³ãƒ¼ãƒ‰å“è³ªã‚’ä¿ã¤
- å¤§ããªå¤‰æ›´å‰ã«ã¯`moon run :typecheck`ã§ç¢ºèª
- moonã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’æ´»ç”¨ã—ã¦é«˜é€Ÿé–‹ç™º
- ä¾å­˜é–¢ä¿‚ã®è‡ªå‹•è§£æ±ºã‚’ä¿¡é ¼ã—ã¦ã€æ‰‹å‹•ãƒ“ãƒ«ãƒ‰ã¯é¿ã‘ã‚‹

## ğŸ¤ ãƒãƒ¼ãƒ é–‹ç™º

### ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥

```bash
# æ©Ÿèƒ½é–‹ç™º
git checkout -b feature/user-authentication
# é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆãƒ»ã‚³ãƒŸãƒƒãƒˆ
git push origin feature/user-authentication

# ãƒã‚°ä¿®æ­£
git checkout -b fix/login-validation
# ä¿®æ­£ãƒ»ãƒ†ã‚¹ãƒˆãƒ»ã‚³ãƒŸãƒƒãƒˆ
git push origin fix/login-validation
```

### ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆå‰ã®ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] `moon run :fix`ã§ã‚³ãƒ¼ãƒ‰æ•´å½¢
- [ ] `moon run :typecheck`ã§å‹ãƒã‚§ãƒƒã‚¯
- [ ] `moon run :build`ã§ãƒ“ãƒ«ãƒ‰ç¢ºèª
- [ ] é©åˆ‡ãªã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
- [ ] å¿…è¦ã«å¿œã˜ã¦ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°

### ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ãƒã‚¤ãƒ³ãƒˆ

- å‹å®‰å…¨æ€§ã®ç¢ºä¿
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¸ã®å½±éŸ¿
- æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã¨ã®æ•´åˆæ€§
- ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ï¼ˆå°†æ¥å®Ÿè£…æ™‚ï¼‰
