## ç›®æ¬¡

## HonoğŸ”¥ ã‚’çŸ¥ã‚‹

https://hono.dev

- **[Hono](https://hono.dev)ã¨ã¯ã€**
  - **JavaScript ã§ Web ã‚¢ãƒ—ãƒªã‚’ä½œã‚‹ãŸã‚ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**
  - [ãƒªãƒã‚¸ãƒˆãƒª](https://github.com/honojs/hono)
  - **js ã§ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®é–‹ç™º**ã™ã‚‹ã¨ãã«ä¾¿åˆ©
    - ä¼¼ãŸãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã«ã¯ãƒ»ãƒ»ãƒ»
      - [Express.js](https://expressjs.com/ja/)
      - [Koa.js](https://koajs.com)
    - **API é–‹ç™º**ãªã©ã§ä½¿ç”¨ã§ãã‚‹
  - **[Web æ¨™æº– APIï¼ˆWeb Standard APIï¼‰](https://developer.mozilla.org/ja/docs/Web/API)ã®ã¿ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹**
    - ä¾‹ãˆã°ã€
      - [fetch ãƒ¡ã‚½ãƒƒãƒ‰](https://fetch.spec.whatwg.org/#fetch-method) ãªã©ãŒä½¿ç”¨ã§ãã‚‹
    - ãªã®ã§ã€**Web æ¨™æº– API ã«æº–æ‹ ã—ã¦ã„ã‚‹[js ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ](javascript-runtime)ã§ Hono ã¯å‹•ä½œã™ã‚‹**
      - é–¢é€£è¨˜äº‹ï¼š[JavaScript ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ï¼ˆå®Ÿè¡Œç’°å¢ƒï¼‰ã«ã¤ã„ã¦ï¼ˆå›³è§£ï¼‰](javascript-runtime)
  - **Hoho ã®å®Ÿè¡Œç’°å¢ƒï¼ˆjs ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ï¼‰**
    - [workerd - Cloudflare Workers](https://developers.cloudflare.com/workers/)
    - [Deno](https://deno.com)
    - [Bun](https://bun.sh)
    - [Fastly Compute](https://www.fastly.com/documentation/developers/)
    - [AWS Lambda](https://docs.aws.amazon.com/ja_jp/lambda/latest/dg/welcome.html)
    - [Node.js](https://nodejs.jp/docs)
    - [edge-light - Vercel Edge Functions](https://vercel.com/docs/functions)
  - **[Cloudflare](cloudflare-what-is)ã«å‹¤ã‚ã¦ã„ã‚‹å’Œç”°è£•ä»‹ã•ã‚“ï¼ˆ[Twitter](https://twitter.com/yusukebe)ï¼‰ãŒé–‹ç™º**
    - **Cloudflare ã«å‹¤ã‚ã‚‹å‰ã‹ã‚‰é–‹ç™ºã—ã¦ã„ã‚‹ï¼ˆ2021 å¹´ 12 æœˆ 15 æ—¥ã€œï¼‰**
    - ã€ŒãŸã ã—ã€Hono ã¯ Cloudflare ã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚åƒ•ãŒå…¥ç¤¾ã—ãŸã“ã¨ã§ã€Hono ã‚‚ Cloudflare ã®å…¬å¼ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã«æ€ãˆã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ãã†ã§ã¯ãªã„ã®ã§ã™ã€‚Hono ã¯ã‚ãã¾ã§ã‚‚åƒ•ã‚’ä¸­å¿ƒã¨ã—ãŸã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚¿ãƒ¼ã«ã‚ˆã‚‹ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã§ã™ã€‚ã€ï¼ˆå¼•ç”¨ï¼š[ã€ŒHono ã¯ã‚ãã¾ã§ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã€é–‹ç™ºè€…ã§ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚¿ãƒ¼ã®ç§ãŒä¼šç¤¾å“¡ã«ãªã£ãŸç†ç”±ã€](https://findy-code.io/engineer-lab/yusukebe)ï¼‰
    - ã€Œ[ãƒœã‚±ã¦](https://bokete.jp)ã€ã®é–‹ç™ºè€…ã§ã‚‚ã‚ã‚‹
      - 2 ãƒ¶æœˆã§é–‹ç™ºã•ã‚ŒãŸã¨ã®ã“ã¨ï¼ˆã‚½ãƒ¼ã‚¹ï¼š[ã€Œå’Œç”°è£•ä»‹ï¼ˆãƒœã‚±ã¦ï¼‰Ã— åœŸå±‹æ³°æ´‹ï¼šå‰ç·¨ã€Œã‚†ãƒ¼ã™ã‘ã¹ãƒ¼ã®ä½œã‚Šæ–¹ã€](https://dentsu-ho.com/articles/2006)ã€ï¼‰
  - **Hono é–‹ç™ºè€…(å’Œç”°ã•ã‚“)ã«ã‚ˆã‚‹ã‚¹ãƒ©ã‚¤ãƒ‰**
    - [ã©ã“ã§ã‚‚å‹•ã Web ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’ã¤ãã‚‹](https://speakerdeck.com/yusukebe/dokodemodong-kuwebhuremuwakuwotukuru)
    - [Hono v4](https://speakerdeck.com/yusukebe/hono-v4)

## Hono ã®å…·ä½“çš„ãªã‚³ãƒ¼ãƒ‰ï¼ˆHono æœªä½¿ç”¨ã‚³ãƒ¼ãƒ‰ã¨æ¯”è¼ƒï¼‰

### 1. ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ‰±ã†

**Hono ä½¿ç”¨:**

```javascript
// Honoã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
import { Hono } from "hono";

// Honoã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åˆæœŸåŒ–
const app = new Hono();

// '/greet'ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«GETãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒæ¥ãŸå ´åˆã®å‡¦ç†
app.get("/greet", (c) => {
  // ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿'name'ã‚’å–å¾—ã€ãªã‘ã‚Œã°'World'ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¨ã™ã‚‹
  const name = c.req.query("name") || "World";
  // ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¨ã—ã¦ãƒ†ã‚­ã‚¹ãƒˆã‚’è¿”ã™
  return c.text(`Hello, ${name}!`);
});

// ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’èµ·å‹•
app.fire();
```

**å›³è§£:**

```plaintext
[ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ]
  |
  | (GET /greet?name=John)
  v
[Honoã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³]
  |
  | (ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è§£æ)
  v
[ãƒ¬ã‚¹ãƒãƒ³ã‚¹ç”Ÿæˆ]
  |
  | ("Hello, John!")
  v
[ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ (ãƒ¬ã‚¹ãƒãƒ³ã‚¹å—ä¿¡)]
```

---

**Hono æœªä½¿ç”¨ï¼ˆNode.js ã®ã¿ï¼‰:**

```javascript
// HTTPãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
const http = require("http");
// URLãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
const url = require("url");

// HTTPã‚µãƒ¼ãƒãƒ¼ã‚’ä½œæˆ
const server = http.createServer((req, res) => {
  // URLã‹ã‚‰ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è§£æ
  const queryObject = url.parse(req.url, true).query;
  // 'name'ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å–å¾—ã€ãªã‘ã‚Œã°'World'ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¨ã™ã‚‹
  const name = queryObject.name || "World";
  // ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ˜ãƒƒãƒ€ã‚’è¨­å®š
  res.writeHead(200, { "Content-Type": "text/plain" });
  // ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒœãƒ‡ã‚£ã‚’é€ä¿¡
  res.end(`Hello, ${name}!`);
});

// ã‚µãƒ¼ãƒãƒ¼ã‚’ãƒãƒ¼ãƒˆ3000ã§èµ·å‹•
server.listen(3000);
```

**å›³è§£:**

```plaintext
[ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ]
  |
  | (GET /greet?name=John)
  v
[Node.js ã‚µãƒ¼ãƒãƒ¼]
  |
  | (URLè§£æ)
  | (ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è§£æ)
  v
[ãƒ¬ã‚¹ãƒãƒ³ã‚¹ç”Ÿæˆ]
  |
  | ("Hello, John!")
  v
[ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ (ãƒ¬ã‚¹ãƒãƒ³ã‚¹å—ä¿¡)]
```

### 2. JSON ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã™ API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

**Hono ä½¿ç”¨:**

```javascript
// Honoã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
import { Hono } from "hono";

// Honoã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åˆæœŸåŒ–
const app = new Hono();

// '/data'ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«GETãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒæ¥ãŸå ´åˆã®å‡¦ç†
app.get("/data", (c) => {
  // ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¨ã—ã¦è¿”ã™ãƒ‡ãƒ¼ã‚¿
  const data = { message: "Hello, World!", numbers: [1, 2, 3] };
  // ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¨ã—ã¦JSONã‚’è¿”ã™
  return c.json(data);
});

// ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’èµ·å‹•
app.fire();
```

**å›³è§£:**

```plaintext
[ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ]
  |
  | (GET /data)
  v
[Honoã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³]
  |
  | (JSONãƒ¬ã‚¹ãƒãƒ³ã‚¹ç”Ÿæˆ)
  v
[ãƒ¬ã‚¹ãƒãƒ³ã‚¹é€ä¿¡]
  |
  | { "message": "Hello, World!", "numbers": [1, 2, 3] }
  v
[ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ (ãƒ¬ã‚¹ãƒãƒ³ã‚¹å—ä¿¡)]
```

---

**Hono æœªä½¿ç”¨ï¼ˆNode.js ã®ã¿ï¼‰:**

```javascript
// HTTPãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
const http = require("http");

// HTTPã‚µãƒ¼ãƒãƒ¼ã‚’ä½œæˆ
const server = http.createServer((req, res) => {
  // ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¨ã—ã¦è¿”ã™ãƒ‡ãƒ¼ã‚¿
  const data = { message: "Hello, World!", numbers: [1, 2, 3] };
  // ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ˜ãƒƒãƒ€ã‚’è¨­å®š
  res.writeHead(200, { "Content-Type": "application/json" });
  // ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒœãƒ‡ã‚£ã¨ã—ã¦JSONã‚’é€ä¿¡
  res.end(JSON.stringify(data));
});

// ã‚µãƒ¼ãƒãƒ¼ã‚’ãƒãƒ¼ãƒˆ3000ã§èµ·å‹•
server.listen(3000);
```

**å›³è§£:**

```plaintext
[ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ]
  |
  | (GET /data)
  v
[Node.js ã‚µãƒ¼ãƒãƒ¼]
  |
  | (JSONãƒ¬ã‚¹ãƒãƒ³ã‚¹ç”Ÿæˆ)
  v
[ãƒ¬ã‚¹ãƒãƒ³ã‚¹é€ä¿¡]
  |
  | { "message": "Hello, World!", "numbers": [1, 2, 3] }
  v
[ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ (ãƒ¬ã‚¹ãƒãƒ³ã‚¹å—ä¿¡)]
```

### 3. ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚’æ´»ç”¨ã™ã‚‹

**Hono ä½¿ç”¨:**

```javascript
// Honoã¨åŸºæœ¬èªè¨¼ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
import { Hono } from "hono";
import { basicAuth } from "hono/basic-auth";

// Honoã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åˆæœŸåŒ–
const app = new Hono();

// '/protected/*'ã®ãƒ‘ã‚¹ã«åŸºæœ¬èªè¨¼ã®ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚’é©ç”¨
app.use("/protected/*", basicAuth({ username: "user", password: "pass" }));

// '/protected/secret'ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«GETãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒæ¥ãŸå ´åˆã®å‡¦ç†
app.get("/protected/secret", (c) => c.text("Secret Information"));

// ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’èµ·å‹•
app.fire();
```

**å›³è§£:**

```plaintext
[ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ]
  |
  | (GET /protected/secret)
  v
[Honoã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³]
  |
  | (èªè¨¼ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢)
  | (èªè¨¼æˆåŠŸ)
  v
[ãƒ¬ã‚¹ãƒãƒ³ã‚¹ç”Ÿæˆ]
  |
  | ("Secret Information")
  v
[ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ (ãƒ¬ã‚¹ãƒãƒ³ã‚¹å—ä¿¡)]
```

---

**Hono æœªä½¿ç”¨ï¼ˆNode.js ã®ã¿ï¼‰:**

```javascript
// HTTPã¨åŸºæœ¬èªè¨¼ã‚’è§£æã™ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
const http = require("http");
const auth = require("basic-auth");

// HTTPã‚µãƒ¼ãƒãƒ¼ã‚’ä½œæˆ
const server = http.createServer((req, res) => {
  // ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‹ã‚‰èªè¨¼æƒ…å ±ã‚’å–å¾—
  const credentials = auth(req);

  // èªè¨¼æƒ…å ±ã®ãƒã‚§ãƒƒã‚¯
  if (
    !credentials ||
    credentials.name !== "user" ||
    credentials.pass !== "pass"
  ) {
    // èªè¨¼å¤±æ•—
    res.writeHead(401, { "WWW-Authenticate": 'Basic realm="example"' });
    res.end("Access denied");
  } else {
    // èªè¨¼æˆåŠŸ
    res.writeHead(200, { "Content-Type": "text/plain" });
    res.end("Secret Information");
  }
});

// ã‚µãƒ¼ãƒãƒ¼ã‚’ãƒãƒ¼ãƒˆ3000ã§èµ·å‹•
server.listen(3000);
```

**å›³è§£:**

```plaintext
[ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ]
  |
  | (GET /protected/secret)
  v
[Node.js ã‚µãƒ¼ãƒãƒ¼]
  |
  | (èªè¨¼æƒ…å ±è§£æ)
  | (èªè¨¼ãƒã‚§ãƒƒã‚¯)
  | (èªè¨¼æˆåŠŸ)
  v
[ãƒ¬ã‚¹ãƒãƒ³ã‚¹ç”Ÿæˆ]
  |
  | ("Secret Information")
  v
[ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ (ãƒ¬ã‚¹ãƒãƒ³ã‚¹å—ä¿¡)]
```

## Hono ã«é–¢ã™ã‚‹å¤–éƒ¨è¨˜äº‹

- [Hono[ç‚]ã£ã¦ã„ã†ã‚¤ã‚±ã¦ã‚‹åå‰ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’ä½œã£ã¦ã„ã‚‹](https://zenn.dev/yusukebe/articles/0c7fed0949e6f7)
- [[Cloudflare Workers] Hono ã« JSX ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸ](https://zenn.dev/yusukebe/articles/c9bc1aa389cbd7)
- [Hono ã® v3 ãŒå‡ºã¾ã—ãŸ](https://zenn.dev/yusukebe/articles/53713b41b906de)
- [Hono ã® v3.2 ãŒå‡ºã¾ã—ãŸ](https://zenn.dev/yusukebe/articles/ee57dc12f34724)
- [Bun ã¨ Hono](https://zenn.dev/yusukebe/articles/efa173ab4b9360)
- [Hono + htmx + Cloudflare ã¯æ–°ã—ã„ã‚¹ã‚¿ãƒƒã‚¯](https://zenn.dev/yusukebe/articles/e8ff26c8507799)
- [Hono ã®æ–°ã—ã„ Cloudflare Pages ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼ã«ã¤ã„ã¦](https://zenn.dev/yusukebe/articles/92fcb0ef03b151)
- [Hono ã® Node.js ã‚¢ãƒ€ãƒ—ã‚¿ãŒ 2.7 å€é€Ÿããªã‚Šã¾ã—ãŸ](https://zenn.dev/yusukebe/articles/7ac501716ae1f7)
- [Hono ã® v3.10 ã¨ v3.11 ã«ã¤ã„ã¦](https://zenn.dev/yusukebe/articles/d1be7aa06999cb)
- [Hono ã® v4 ãŒ 2 æœˆ 9 æ—¥ã«ãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¾ã™](https://zenn.dev/yusukebe/articles/b20025ebda310a)
- [HonoX ã«ã¤ã„ã¦](https://zenn.dev/yusukebe/articles/724940fa3f2450)
